{"version":3,"sources":["../../../src/server/passport/local-signup.js"],"names":["User","require","model","PassportLocalStrategy","Strategy","module","exports","usernameField","passwordField","session","passReqToCallback","req","email","password","done","userData","trim","name","body","newUser","save","err"],"mappings":";;AAAA,IAAMA,OAAOC,QAAQ,UAAR,EAAoBC,KAApB,CAA0B,MAA1B,CAAb;AACA,IAAMC,wBAAwBF,QAAQ,gBAAR,EAA0BG,QAAxD;;AAEA;;;AAGAC,OAAOC,OAAP,GAAiB,IAAIH,qBAAJ,CACf;AACEI,iBAAe,OADjB;AAEEC,iBAAe,UAFjB;AAGEC,WAAS,KAHX;AAIEC,qBAAmB;AAJrB,CADe,EAOf,UAACC,GAAD,EAAMC,KAAN,EAAaC,QAAb,EAAuBC,IAAvB,EAAgC;AAC9B,MAAMC,WAAW;AACfH,WAAOA,MAAMI,IAAN,EADQ;AAEfH,cAAUA,SAASG,IAAT,EAFK;AAGfC,UAAMN,IAAIO,IAAJ,CAASD,IAAT,CAAcD,IAAd;AAHS,GAAjB;AAKA,MAAMG,UAAU,IAAInB,IAAJ,CAASe,QAAT,CAAhB;AACAI,UAAQC,IAAR,CAAa,eAAO;AAClB,QAAIC,GAAJ,EAAS;AACP,aAAOP,KAAKO,GAAL,CAAP;AACD;AACD,WAAOP,KAAK,IAAL,CAAP;AACD,GALD;AAMD,CApBc,CAAjB","file":"local-signup.js","sourcesContent":["const User = require('mongoose').model('User');\nconst PassportLocalStrategy = require('passport-local').Strategy;\n\n/**\n * Return the Passport Local Strategy object.\n */\nmodule.exports = new PassportLocalStrategy(\n  {\n    usernameField: 'email',\n    passwordField: 'password',\n    session: false,\n    passReqToCallback: true\n  },\n  (req, email, password, done) => {\n    const userData = {\n      email: email.trim(),\n      password: password.trim(),\n      name: req.body.name.trim()\n    };\n    const newUser = new User(userData);\n    newUser.save(err => {\n      if (err) {\n        return done(err);\n      }\n      return done(null);\n    });\n  }\n);\n"]}